{
  "metadata": {
    "analysis_date": "2026-01-31",
    "total_tests": 2459,
    "total_files": 182,
    "methodology": "Parallel agent analysis with 5 specialized agents covering all test directories"
  },
  "summary": {
    "meaningful_pct": 77.8,
    "shallow_pct": 13.2,
    "over_mocked_pct": 5.4,
    "tautological_pct": 2.1,
    "incomplete_pct": 1.5
  },
  "by_module": {
    "src/core": {
      "score": 2.4,
      "tests": 439,
      "A_pct": 85.6,
      "B_pct": 12.8,
      "C_pct": 0,
      "D_pct": 1.1,
      "E_pct": 0.5,
      "files": [
        "test_exceptions.py",
        "test_extraction.py",
        "test_preprocessing.py",
        "test_pipelines.py",
        "test_product_registry.py",
        "test_registry.py",
        "test_quality_monitor.py",
        "test_fixture_adapter.py",
        "test_types.py",
        "test_protocols.py",
        "test_schema_validator.py"
      ],
      "issues": [
        "test_protocols.py: 17 shallow tests (hasattr only)",
        "test_types.py: 5 tautological tests",
        "test_schema_validator.py: 10 shallow tests (membership checks only)"
      ]
    },
    "src/features/selection": {
      "score": 4.1,
      "tests": 152,
      "A_pct": 72.0,
      "B_pct": 12.5,
      "C_pct": 7.2,
      "D_pct": 0.7,
      "E_pct": 0.7,
      "files": [
        "test_pipeline_orchestrator.py",
        "test_constraints_engine.py",
        "test_bootstrap_engine.py",
        "test_aic_engine.py",
        "test_block_bootstrap_engine.py",
        "test_ridge_cv_engine.py",
        "test_stability_analysis.py",
        "test_aic_evaluation_real.py"
      ],
      "issues": [
        "test_pipeline_orchestrator.py: 5 over-mocked tests (12+ patches)",
        "test_block_bootstrap_engine.py: 3 over-mocked tests"
      ],
      "strengths": [
        "test_constraints_engine.py: 79% meaningful",
        "test_ridge_cv_engine.py: 100% meaningful",
        "test_stability_analysis.py: 100% meaningful"
      ]
    },
    "src/validation": {
      "score": 4.3,
      "tests": 318,
      "A_pct": 81.1,
      "B_pct": 10.1,
      "C_pct": 4.4,
      "D_pct": 2.2,
      "E_pct": 0,
      "files": [
        "test_leakage_gates.py",
        "test_production_validators.py",
        "test_data_schemas.py",
        "test_constraint_violations.py",
        "test_coefficient_patterns.py",
        "test_input_validators.py",
        "test_config_schemas.py"
      ],
      "issues": [
        "test_leakage_gates.py: 2 over-mocked tests",
        "test_data_schemas.py: 6 shallow tests"
      ],
      "critical_finding": "Lag-0 detection tests are MEANINGFUL (NOT tautological) - properly validate pattern matching"
    },
    "src/visualization": {
      "score": 3.6,
      "tests": 115,
      "A_pct": 78.3,
      "B_pct": 12.2,
      "C_pct": 7.0,
      "D_pct": 2.6,
      "E_pct": 0,
      "files": [
        "test_inference_plots.py",
        "test_statistical_validation.py",
        "test_visualization.py"
      ],
      "issues": [
        "Heavy mock usage for matplotlib - tests call counts, not actual plot data",
        "test_creates_histogram: Only checks mock.call_count"
      ]
    },
    "src/models": {
      "score": 4.2,
      "tests": 595,
      "A_pct": 78.8,
      "B_pct": 14.9,
      "C_pct": 5.0,
      "D_pct": 0.5,
      "E_pct": 0.7,
      "files": [
        "test_forecasting_atomic.py",
        "test_inference_training.py",
        "test_forecasting_types.py",
        "test_forecasting_atomic_validation.py",
        "test_forecasting_atomic_results.py",
        "test_forecasting_orchestrator.py",
        "test_inference_tableau.py"
      ],
      "issues": [
        "forecasting_atomic_validation.py Phase 5: Artificial Mock exception tests",
        "forecasting_orchestrator.py: 13 over-mocked tests"
      ],
      "strengths": [
        "test_forecasting_types.py: 100% meaningful",
        "test_inference_tableau.py: 98% meaningful",
        "Excellent known-answer tests throughout"
      ]
    },
    "tests/property_based": {
      "score": 4.0,
      "tests": 70,
      "A_pct": 80.0,
      "B_pct": 5.7,
      "C_pct": 0,
      "D_pct": 11.4,
      "E_pct": 2.9,
      "files": [
        "test_economic_invariants.py",
        "test_statistical_invariants.py",
        "test_dataframe_invariants.py",
        "test_numerical_stability.py",
        "test_pipeline_properties.py"
      ],
      "issues": [
        "test_numerical_stability.py: Module skipped",
        "test_pipeline_properties.py: Module skipped",
        "14 tautological tests (compute expected same as actual)"
      ],
      "strengths": [
        "test_statistical_invariants.py: 100% meaningful",
        "Excellent Hypothesis @given usage"
      ]
    },
    "tests/integration": {
      "score": 3.5,
      "tests": 48,
      "A_pct": 58.3,
      "B_pct": 39.6,
      "C_pct": 0,
      "D_pct": 2.1,
      "E_pct": 0,
      "files": [
        "test_pipeline_fixture_equivalence.py",
        "test_notebook_equivalence.py"
      ],
      "issues": [
        "test_notebook_equivalence.py: 19/26 shallow (existence checks only)"
      ],
      "strengths": [
        "test_pipeline_fixture_equivalence.py: 100% meaningful"
      ]
    },
    "tests/e2e": {
      "score": 4.0,
      "tests": 18,
      "A_pct": 83.3,
      "B_pct": 0,
      "C_pct": 0,
      "D_pct": 0,
      "E_pct": 16.7,
      "files": [
        "test_production_notebooks.py"
      ],
      "issues": [
        "3 documentation-only tests (pass statement)"
      ],
      "strengths": [
        "Validates notebook execution, output generation, metric thresholds"
      ]
    },
    "tests/anti_patterns": {
      "score": 4.5,
      "tests": 42,
      "A_pct": 88.1,
      "B_pct": 0,
      "C_pct": 2.4,
      "D_pct": 2.4,
      "E_pct": 7.1,
      "files": [
        "test_lag0_competitor_detection.py",
        "test_coefficient_sign_validation.py",
        "test_future_leakage.py"
      ],
      "critical_finding": "CRITICAL business constraint tests well-protected",
      "strengths": [
        "Lag-0 detection: 11/13 meaningful",
        "Sign validation: 16/17 meaningful",
        "Future leakage: 10/12 meaningful"
      ]
    }
  },
  "worst_offenders": [
    {
      "file": "tests/unit/core/test_protocols.py",
      "issue": "17 shallow tests using hasattr only",
      "category": "B",
      "recommendation": "Replace hasattr checks with actual duck-typing validation using real adapters"
    },
    {
      "file": "tests/unit/features/selection/test_pipeline_orchestrator.py",
      "issue": "5 tests with 12+ patches mocking entire pipeline",
      "category": "C",
      "recommendation": "De-mock and test real AIC evaluation with fixture data"
    },
    {
      "file": "tests/integration/test_notebook_equivalence.py",
      "issue": "19/26 tests are existence checks only",
      "category": "B",
      "recommendation": "Add value comparisons, not just shape/existence"
    },
    {
      "file": "tests/unit/models/test_forecasting_orchestrator.py",
      "issue": "13 tests with 5+ patches",
      "category": "C",
      "recommendation": "Reduce patching, integrate with real fixture data"
    },
    {
      "file": "tests/unit/models/test_forecasting_atomic_validation.py",
      "issue": "Phase 5 exception tests use artificial Mock objects",
      "category": "C",
      "recommendation": "Replace BadArray/BadPredictions with real exception triggers"
    },
    {
      "file": "tests/unit/core/test_types.py",
      "issue": "5 tautological tests (assert what was just set)",
      "category": "D",
      "recommendation": "Test behavior beyond field assignment"
    }
  ],
  "critical_business_protections": {
    "lag0_competitor_detection": {
      "status": "STRONG",
      "tests": 11,
      "meaningful_pct": 84.6,
      "verdict": "Critical leakage gate well-tested"
    },
    "coefficient_sign_validation": {
      "status": "STRONG",
      "tests": 16,
      "meaningful_pct": 94.1,
      "verdict": "Economic constraints enforced"
    },
    "future_data_leakage": {
      "status": "STRONG",
      "tests": 10,
      "meaningful_pct": 83.3,
      "verdict": "Temporal ordering validated"
    },
    "r2_threshold_gate": {
      "status": "STRONG",
      "tests": 4,
      "meaningful_pct": 100,
      "verdict": "Halt gate at 0.30 R²"
    }
  },
  "known_answer_tests": [
    {
      "file": "test_forecasting_atomic.py",
      "line": 332,
      "test": "Predictions close to 5.0 for known input"
    },
    {
      "file": "test_forecasting_atomic_results.py",
      "line": 251,
      "test": "Perfect predictions yield R²=1.0, MAPE=0.0"
    },
    {
      "file": "test_inference_tableau.py",
      "line": 179,
      "test": "Sales momentum 50M + 30M = 80M"
    },
    {
      "file": "tests/reference_data/forecasting_baseline_metrics.json",
      "line": "N/A",
      "test": "Baseline R² and MAPE values documented (negative R² explained)"
    }
  ]
}
